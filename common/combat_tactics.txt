#### COMBAT TACTICS ###########################################################
#
# NOTE: tactics must start with "tactic_" in their name to work with techs.
###############################################################################

phases = { # phase = no is the standard phase
	initial_attack
	breakthrough
	exploitation
}

tactic_uncoordinated_attack = {

	is_attacker = yes
	trigger = { # combined scope for both country and combatant
		is_attacker = yes
		phase = no
	}
	
	active = yes

	base =  { factor = 4 }
	picture = attack
	
	countered_by = tactic_counterattack

	attacker = -0.05
}

tactic_basic_attack = {

	is_attacker = yes
	trigger = { # combined scope for both country and combatant
		is_attacker = yes
		phase = no
	}
	
	active = yes

	base =  { factor = 4 }
	picture = attack
	
	countered_by = tactic_basic_defend
	countered_by = tactic_masterful_defense

	phase = breakthrough

	attacker = 0.05
}

tactic_masterful_attack = {

	is_attacker = yes
	trigger = { # combined scope for both country and combatant
		is_attacker = yes
		phase = no
	}
	
	active = yes

	base =  { factor = 2 }
	picture = attack
	
	countered_by = tactic_masterful_defense

	phase = breakthrough

	attacker = 0.1
}

tactic_uncoordinated_defense = {
	is_attacker = no
	trigger = {
		is_attacker = no
		phase = no
	}
	
	active = yes
	
	base =  { factor = 4 }
	picture = defend
	
	defender = -0.05
}

tactic_basic_defend = {
	is_attacker = no
	trigger = {
		is_attacker = no
		phase = no
	}
	
	active = yes
	
	base =  { factor = 4 }
	picture = defend
	
	defender = 0.05
}

tactic_masterful_defense = {
	is_attacker = no
	trigger = {
		is_attacker = no
		phase = no
	}
	
	active = yes
	
	base =  { factor = 4 }
	picture = defend
	
	defender = 0.1
}

tactic_uncoordinated_breakthrough = { 
	is_attacker = yes
	trigger = {
		is_attacker = yes
		phase = breakthrough
	}
	
	active = yes
	
	base =  {
		factor = 2
		modifier = {
			add = 2
			has_trait = aggressive_assaulter
		}
	} #Revisit ideally this should be more common in urban terrain
	
	picture = assault
	countered_by = tactic_counterattack
	
	attacker = 0.1			#attacker gets a bonus to doing damage
}

tactic_basic_breakthrough = {
	is_attacker = yes
	trigger = {
		is_attacker = yes
		phase = breakthrough
	}
	
	active = yes
	
	base =  {
		factor = 2
		modifier = {
			add = 2
			has_trait = aggressive_assaulter
		}
	} #Revisit ideally this should be more common in urban terrain
	
	phase = exploitation

	picture = assault
	countered_by = tactic_basic_counterattack
	countered_by = tactic_masterful_counterattack
	
	attacker = 0.15			#attacker gets a bonus to doing damage
}

tactic_masterful_breakthrough = { 
	is_attacker = yes
	trigger = {
		is_attacker = yes
		phase = breakthrough
	}
	
	active = yes
	
	base =  {
		factor = 2
		modifier = {
			add = 2
			has_trait = aggressive_assaulter
		}
	} #Revisit ideally this should be more common in urban terrain
	
	picture = assault
	countered_by = tactic_masterful_counterattack
	
	attacker = 0.25			#attacker gets a bonus to doing damage
}

tactic_uncoordinated_counterattack = { # 
	is_attacker = no
	trigger = {
		is_attacker = no
		skill_advantage > 0
		phase = breakthrough
	}
	
	active = yes
	
	base =  {
		factor = 4
		modifier = {
			add = 4
			NOT = { has_trait = unyielding_defender }
		}
	}
	picture = counterattack
	
	defender = 0.1
}

tactic_basic_counterattack = { # 
	is_attacker = no
	trigger = {
		is_attacker = no
		skill_advantage > 0
		phase = breakthrough
	}
	
	active = yes
	
	base =  {
		factor = 4
		modifier = {
			add = 4
			has_trait = unyielding_defender
		}
	}
	picture = counterattack
	
	defender = 0.15
}

tactic_masterful_counterattack = { # 
	is_attacker = no
	trigger = {
		is_attacker = no
		skill_advantage > 0
		phase = breakthrough
	}
	
	active = yes
	
	base =  {
		factor = 4
		modifier = {
			add = 4
			has_trait = unyielding_defender
		}
	}
	picture = counterattack
	
	defender = 0.25
}